import fs from "node:fs";

const levels = 5

const letters = [
    "a",
    "b",
    "c",
    "d",
    "e",
    "f",
    "g",
    "h",
    "i",
    "j",
    "k",
    "l",
    "m",
    "n",
    "o",
    "p",
    "q",
    "r",
    "s",
    "t", 
    "u", 
    "v", 
    "w", 
    "x", 
    "y", 
    "z", 
    "aa", 
    "ab", 
    "ac", 
    "ad", 
    "ae", 
    "af", 
    "ag", 
    "ah", 
    "ai", 
    "aj", 
    "ak", 
    "al",
    "am",
    "an",
    "ao",
    "ao",
    "ap",
    "aq",
    "ar",
    "as",
    "at",
    "au",
    "av",
    "aw",
    "ax",
    "ay",
    "az",
    "ba",
    "bb", 
    "bc", 
    "bd", 
    "be", 
    "bf", 
    "bg", 
    "bh", 
    "bi", 
    "bj", 
    "bk", 
    "bl",
    "bm",
    "bn",
    "bo",
    "bo",
    "bp",
    "bq",
    "br",
    "bs",
    "bt",
    "bu",
    "bv",
    "bw",
    "bx",
    "by",
    "bz",
    "ca",
    "cb", 
    "cc", 
    "cd", 
    "ce", 
    "cf", 
    "cg", 
    "ch", 
    "ci", 
    "cj", 
    "ck", 
    "cl",
    "cm",
    "cn",
    "co",
    "co",
    "cp",
    "cq",
    "cr",
    "cs",
    "ct",
    "cu",
    "cv",
    "cw",
    "cx",
    "cy",
    "cz",
    "db", 
    "dc", 
    "dd", 
    "de", 
    "df", 
    "dg", 
    "dh", 
    "di", 
    "dj", 
    "dk", 
    "dl",
    "dm",
    "dn",
    "do",
    "do",
    "dp",
    "dq",
    "dr",
    "ds",
    "dt",
    "du",
    "dv",
    "dw",
    "dx",
    "dy",
    "dz",
    "eb", 
    "ec", 
    "ed", 
    "ee", 
    "ef", 
    "eg", 
    "eh", 
    "ei", 
    "ej", 
    "ek", 
    "el",
    "em",
    "en",
    "eo",
    "eo",
    "ep",
    "eq",
    "er",
    "es",
    "et",
    "eu",
    "ev",
    "ew",
    "ex",
    "ey",
    "ez",
]

async function generate(level, letter) {
    const dependencies = level === 1
        ? { "webpack": "^5.88.2" }
        : Object.fromEntries(letters.map(letter => [`level${level-1}-${letter}`, "workspace:*"]))

    const packageJson = {
        "name": `level${level}-${letter}`,
        dependencies
    }

    const contents = JSON.stringify(packageJson, undefined, 4) + "\n"

    await fs.promises.mkdir(`packages/${packageJson.name}`, { recursive: true })
    await fs.promises.writeFile(`packages/${packageJson.name}/package.json`, contents)
}

async function generateLevel(level) {
    await Promise.all(letters.map(letter => generate(level, letter)))
}

async function generateLevels(levels) {
    await Promise.all([...new Array(levels).keys()].map(i => generateLevel(i+1)))
}

await generateLevels(levels)
